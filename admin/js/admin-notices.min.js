!function(e){e(document).ready((function(){var s=e(".pixassist-notice"),t=e(".pixassist-notice.rating-notice");if(t.length){var i=t.find(".initial-step"),a=t.find(".yes-step"),n=t.find(".no-step"),o=t.find(".rating-thankyou-step"),d=t.find(".feedback-thankyou-step"),c=t.find(".maybelater-thankyou-step");t.find(".js-pixassist-enjoyed-handle").on("click",(function(e){e.preventDefault(),i.hide(),a.show()})),t.find(".js-pixassist-awardrating-handle").on("click",(function(e){i.hide(),a.hide(),o.show()})),t.find(".js-pixassist-maybelater-handle").on("click",(function(e){e.preventDefault(),i.hide(),a.hide(),c.show()})),t.find(".js-pixassist-notenjoyed-handle").on("click",(function(e){e.preventDefault(),i.hide(),n.show(),t.find("textarea.feedback-message").autogrow().focus()})),t.find(".js-pixassist-submitfeedback-handle").on("click",(function(s){if(s.preventDefault(),!t.find("textarea.feedback-message").val())return t.find(".feedback-message-wrapper").addClass("shake animated"),void setTimeout((function(){t.find(".feedback-message-wrapper").removeClass("shake animated")}),1e3);e(s.target).addClass("updating-message");let a={hash:""};if(void 0!==pixassist.themeMod.licenseHash&&pixassist.themeMod.licenseHash.length>0&&(a.hash=pixassist.themeMod.licenseHash),void 0!==window.pixassistHelpers){let e={subject:pixassistNotices.feedbackTicketSubject,topic:"The feedback you asked through the admin notification.",details:t.find("textarea.feedback-message").val(),license_hash:a.hash,tag:"feedback",site_url:pixassistNotices.installurl,user_id:parseInt(pixassist.user.pixassist_user_ID),theme_slug:pixassist.themeSupports.original_slug,hash_id:pixassist.themeSupports.theme_id,theme_type:pixassist.themeSupports.theme_type};window.pixassistHelpers.restOauth1Request(pixassist.apiEndpoints.pxm.createTicket.method,pixassist.apiEndpoints.pxm.createTicket.url,e,(function(e){return"success"!==e.code&&console.log(e),i.hide(),n.hide(),d.show(),e}),(function(e){console.log(e)}),(function(e){return 2!==(_.isUndefined(e.status)?parseInt(e.code.toString()[0]):parseInt(e.status.toString()[0]))&&console.log(e),e}))}else i.hide(),n.hide(),d.show()})),t.find(".js-pixassist-notnow-handle").on("click",(function(e){e.preventDefault(),i.hide(),n.hide(),c.show()}))}s.on("click",".button.dismiss, .notice-dismiss",(function(s){s.preventDefault(),function(s){var t=e(s.target),i=e(s.target).closest(".pixassist-notice");t.addClass("updating-message"),e.ajax({url:pixassistNotices.ajaxurl,type:"post",data:{action:i.find('[name="pixassist-notice-dismiss-action"]').val(),nonce_dismiss:i.find('[name="nonce_dismiss"]').val()}}).always((function(){i.slideUp()}))}(s)}))})),e.fn.autogrow=function(s){return this.filter("textarea").each((function(){var t=this,i=e(t),a=i.height(),n=i.hasClass("autogrow-short")?0:parseInt(i.css("lineHeight"))||0,o=e.extend({preGrowCallback:null,postGrowCallback:null},s),d=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:i.width(),fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily"),fontWeight:i.css("fontWeight"),lineHeight:i.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),c=function(e){var s=t.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n$/,"<br/>&#xa0;").replace(/\n/g,"<br/>").replace(/ {2,}/g,(function(e){return function(e,s){for(var t=0,i="";t<s;t++)i+=e;return i}("&#xa0;",e.length-1)+" "}));e&&e.data&&"keydown"===e.data.event&&13===e.keyCode&&(s+="<br />"),d.css("width",i.width()),d.html(s+(0===n?"...":""));var c=Math.max(d.height()+n,a);null!=o.preGrowCallback&&(c=o.preGrowCallback(i,d,c,a)),i.height(c),null!=o.postGrowCallback&&o.postGrowCallback(i)};i.change(c).keyup(c).keydown({event:"keydown"},c),e(window).resize(c),c()}))}}(jQuery);